var write_us=document.querySelector(".btn-write-us"),popup=document.querySelector(".popup"),close=document.querySelector(".popup-close"),reset=document.querySelector(".btn-reset"),login=popup.querySelector("[name='login']"),email=popup.querySelector("[name='email']"),note=popup.querySelector("[name='note']"),form=popup.querySelector("form"),login_storage=localStorage.getItem("login"),email_storage=localStorage.getItem("email");write_us.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("opened"),login_storage&&email_storage?(login.value=login_storage,email.value=email_storage,note.focus()):login_storage?(login.value=login_storage,email.focus()):login.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("opened"),popup.classList.remove("popup-error")}),reset.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("opened"),popup.classList.remove("popup-error")}),form.addEventListener("submit",function(e){login.value&&email.value&&note.value?(localStorage.setItem("login",login.value),localStorage.setItem("email",email.value)):(e.preventDefault(),popup.classList.remove("popup-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("opened")&&(popup.classList.remove("opened"),popup.classList.remove("popup-error"))});